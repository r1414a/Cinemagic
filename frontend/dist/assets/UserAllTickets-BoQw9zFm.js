import{j as e,r as n,i as m,L as r,u as x}from"./index-B8z_zBDs.js";import{h}from"./moment-C5S46NFB.js";import{a as u}from"./allapis-VSAyny7H.js";function c({filteredUserAllReservations:s,status:t}){return s.length===0?e.jsx("div",{className:"w-full pt-20 text-white font-medium text-center",children:e.jsxs("h1",{children:["No ",t," reservations."]})}):e.jsx("div",{className:"flex flex-wrap gap-6 justify-center",children:s.map(l=>e.jsxs("div",{className:"bg-white w-[350px] flex flex-col justify-between rounded-md",children:[e.jsxs("div",{className:"relative space-y-2 p-6 border-b-2 border-dashed",children:[e.jsxs("h3",{className:"text-lg",children:[e.jsx("span",{className:"font-semibold",children:"Movie:"})," The Dark Knight"]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium",children:"Date & Time:"}),e.jsx("p",{className:"text-sm",children:h(l.createdAt).format("dddd, MMMM Do YYYY, hh:mm A")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium",children:"Seat Info:"}),e.jsx("div",{className:"flex gap-2",children:l.seats.map(a=>e.jsx("div",{className:"p-1 rounded-md inline-block text-white bg-gray",children:e.jsx("p",{className:"text-xs",children:a})},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium",children:"Cinema"}),e.jsxs("p",{className:"text-sm",children:[l.theater.chain," | ",l.theater.name," ","| ",l.theater.location," | ",l.city]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium",children:"Total Amount"}),e.jsx("p",{className:"text-sm",children:"â‚¹ 500"})]}),e.jsx("div",{className:"absolute -bottom-6 -right-4 rounded-full w-8 h-8 bg-blue"}),e.jsx("div",{className:"absolute -bottom-4 -left-4 rounded-full w-8 h-8 bg-blue"})]}),e.jsx("div",{className:"px-4 pt-12 pb-4",children:t==="coming"?e.jsx("button",{onClick:()=>alert("click"),className:"w-full bg-dyellow hover:bg-red-600 hover:text-white cursor-pointer font-semibold text-sm py-3.5 rounded-md",children:"Cancel Booking"}):e.jsx("div",{className:`w-full ${t==="past"?"bg-gray":"bg-red-600"} text-center font-semibold text-sm py-3.5 rounded-md`,children:t==="past"?"Past Booking":"Cancelled Booking"})})]},l._id))})}function b({userAllReservations:s}){const[t,l]=n.useState("coming");n.useEffect(()=>{m()},[]);const a=n.useMemo(()=>s.filter(o=>o.status===t),[t,s]),d=i=>{l(i),console.log(i)};return console.log(s,t,a),s===null||a===null?e.jsx(r,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("ul",{className:"flex flex-wrap -mb-px text-md tracking-wider font-medium text-center justify-center",id:"usertickets-styled-tab","data-tabs-toggle":"#usertickets-styled-tab-content","data-tabs-active-classes":"userallticketstabsactive","data-tabs-inactive-classes":"userallticketstabsinactive",role:"tablist",children:[e.jsx("li",{className:"relative me-2",role:"presentation",onClick:i=>d("coming"),children:e.jsx("button",{className:"inline-block p-4 border-b-2 rounded-t-lg",id:"coming-styled-tab","data-tabs-target":"#styled-coming",type:"button",role:"tab","aria-controls":"styled-coming","aria-selected":"false",children:"Coming"})}),e.jsx("li",{className:"relative me-2",role:"presentation",onClick:i=>d("past"),children:e.jsx("button",{className:"inline-block p-4 border-b-2 rounded-t-lg",id:"past-styled-tab","data-tabs-target":"#styled-past",type:"button",role:"tab","aria-controls":"styled-past","aria-selected":"false",children:"Past"})}),e.jsx("li",{className:"relative me-2",role:"presentation",onClick:i=>d("cancelled"),children:e.jsx("button",{className:"inline-block p-4 border-b-2 rounded-t-lg",id:"cancelled-styled-tab","data-tabs-target":"#styled-cancelled",type:"button",role:"tab","aria-controls":"styled-cancelled","aria-selected":"false",children:"Cancelled"})})]})}),e.jsxs("div",{id:"usertickets-styled-tab-content",children:[e.jsx("div",{className:"hidden p-4 rounded-lg",id:"styled-coming",role:"tabpanel","aria-labelledby":"coming-styled-tab",children:e.jsx("div",{className:"w-full",children:e.jsx(c,{filteredUserAllReservations:a,status:"coming"})})}),e.jsx("div",{className:"hidden p-4 rounded-lg",id:"styled-past",role:"tabpanel","aria-labelledby":"past-styled-tab",children:e.jsx("div",{className:"w-full",children:e.jsx(c,{filteredUserAllReservations:a,status:"past"})})}),e.jsx("div",{className:"hidden p-4 rounded-lg",id:"styled-cancelled",role:"tabpanel","aria-labelledby":"cancelled-styled-tab",children:e.jsx("div",{className:"w-full",children:e.jsx(c,{filteredUserAllReservations:a,status:"cancelled"})})})]})]})}function g(){const{userProfile:s}=x(a=>a.user),[t,l]=n.useState(null);return console.log(s),n.useEffect(()=>{s&&(async()=>{u("/api/user/getUserReservations","POST",{userID:s._id},"Error while fetching user's all reservations.",d=>{l(d.reservations)})})()},[s]),t?e.jsx("section",{className:"min-h-screen flex justify-center py-32",children:e.jsx("div",{className:" h-full w-full max-w-7xl mx-auto px-4 xl:px-0",children:e.jsx(b,{userAllReservations:t})})}):e.jsx(r,{})}export{g as default};
