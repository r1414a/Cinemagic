import{d as D,r as u,b as $,u as I,g as V,f as F,h as A,e as C,j as e,L as Y}from"./index-B8z_zBDs.js";import{g as B,f as O,B as N,C as y,S as E,N as S,d as M,T as z,M as L}from"./TypeMovies-Deh_WPY7.js";import{F as T,M as q}from"./MovieDuration-YiszCoLB.js";import{h as w}from"./moment-C5S46NFB.js";import"./index-CH5ZUpk5.js";import"./index-CDTVc3k6.js";function H(o){const{effect:s,swiper:i,on:r,setTranslate:x,setTransition:d,overwriteParams:l,perspective:c,recreateShadows:t,getEffectParams:m}=o;r("beforeInit",()=>{if(i.params.effect!==s)return;i.classNames.push(`${i.params.containerModifierClass}${s}`),c&&c()&&i.classNames.push(`${i.params.containerModifierClass}3d`);const n=l?l():{};Object.assign(i.params,n),Object.assign(i.originalParams,n)}),r("setTranslate _virtualUpdated",()=>{i.params.effect===s&&x()}),r("setTransition",(n,p)=>{i.params.effect===s&&d(p)}),r("transitionEnd",()=>{if(i.params.effect===s&&t){if(!m||!m().slideShadows)return;i.slides.forEach(n=>{n.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(p=>p.remove())}),t()}});let f;r("virtualUpdate",()=>{i.params.effect===s&&(i.slides.length||(f=!0),requestAnimationFrame(()=>{f&&i.slides&&i.slides.length&&(x(),f=!1)}))})}function U(o,s){const i=B(s);return i!==s&&(i.style.backfaceVisibility="hidden",i.style["-webkit-backface-visibility"]="hidden"),i}function G(o){let{swiper:s,duration:i,transformElements:r}=o;const{activeIndex:x}=s;if(s.params.virtualTranslate&&i!==0){let d=!1,l;l=r,l.forEach(c=>{O(c,()=>{if(d||!s||s.destroyed)return;d=!0,s.animating=!1;const t=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});s.wrapperEl.dispatchEvent(t)})})}}function X(o){let{swiper:s,extendParams:i,on:r}=o;i({fadeEffect:{crossFade:!1}}),H({effect:"fade",swiper:s,on:r,setTranslate:()=>{const{slides:l}=s,c=s.params.fadeEffect;for(let t=0;t<l.length;t+=1){const m=s.slides[t];let n=-m.swiperSlideOffset;s.params.virtualTranslate||(n-=s.translate);let p=0;s.isHorizontal()||(p=n,n=0);const h=s.params.fadeEffect.crossFade?Math.max(1-Math.abs(m.progress),0):1+Math.min(Math.max(m.progress,-1),0),g=U(c,m);g.style.opacity=h,g.style.transform=`translate3d(${n}px, ${p}px, 0px)`}},setTransition:l=>{const c=s.slides.map(t=>B(t));c.forEach(t=>{t.style.transitionDuration=`${l}ms`}),G({swiper:s,duration:l,transformElements:c})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!s.params.cssMode})})}const J="/assets/fallbackProfileImage-BaSSXr66.png";function te(){var b;const{state:o}=D();console.log(location);const s=u.useRef(),i=u.useRef(),r=u.useRef(),x=u.useRef(),d=$(),[l,c]=u.useState(!1),{details:t,credits:m,video:f,similarMovies:n,isLoading:p,movieReview:h}=I(a=>a.movie),v=V().id;let j;return console.log(t,f),u.useEffect(()=>(d(F(v)),d(A(v)),()=>{d(C())}),[d,v]),u.useEffect(()=>{var a;if(t.length>0){const _=w().clone().add(15,"days").format("YYYY-MM-DD"),k=w().clone().subtract(2,"months").format("YYYY-MM-DD"),P=w((a=t[0])==null?void 0:a.release_date).isAfter(_),R=w(t[0].release_date).isBefore(k);c(P||R)}},[t]),f&&(j=f.results.filter(a=>a.name==="Official Trailer"||a.type==="Trailer")),t.length===0||!f||p?e.jsx(Y,{}):(console.log(j),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen",style:{backgroundImage:`url(http://image.tmdb.org/t/p//original${t[0].backdrop_path})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",display:"flex",alignItems:"center"},children:[e.jsx("div",{className:"absolute w-full z-10 h-full bg-radial-[at_50%_80%] md:bg-radial-[at_50%_50%] from-transparent to-black to-70% opacity-[0.9] lg:opacity-[0.7]"}),e.jsx("div",{className:"w-full z-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[e.jsx("h1",{className:"max-w-xl text-white text-4xl md:text-6xl font-semibold",children:t[0].original_title}),e.jsx("p",{className:"max-w-xl my-4 md:my-8 text-sm md:text-lg text-white",children:t[0].overview}),l||o.type==="trending"||o.type==="comingsoon"?null:e.jsx(N,{id:t[0].id})]})}),e.jsxs("div",{className:"absolute w-full max-w-7xl px-4 z-30 -bottom-35 left-1/2 -translate-x-1/2",children:[e.jsxs("div",{className:"flex justify-end items-center mb-4 gap-4",children:[e.jsx("p",{className:"text-white font-semibold",children:"Starring:"}),e.jsx(y,{pref:s,nref:i})]}),e.jsx(E,{breakpoints:{320:{slidesPerView:3,spaceBetween:10},480:{slidesPerView:4,spaceBetween:10},640:{slidesPerView:5,spaceBetween:10},1024:{slidesPerView:6,spaceBetween:10},1280:{slidesPerView:7,spaceBetween:10}},onBeforeInit:a=>{a.params.navigation.prevEl=s.current,a.params.navigation.nextEl=i.current},navigation:{prevEl:s.current,nextEl:i.current},modules:[S],className:"mySwiper w-full max-w-7xl mx-auto",children:m[0].cast.map(a=>e.jsx(M,{className:"",children:e.jsxs("div",{className:"relative w-full h-60",children:[e.jsx("img",{className:"w-full rounded-sm h-full object-cover",src:a.profile_path?`http://image.tmdb.org/t/p//original${a.profile_path}`:J,alt:a.name||"Actor"}),e.jsxs("div",{className:"bg-blue/80 backdrop-blur-md w-full py-2 absolute bottom-0 ",children:[e.jsx("h3",{className:"  text-center text-sm text-dyellow ",children:a.name}),e.jsxs("p",{className:"text-center text-xs md:text-sm text-white",children:[" ","as"," ",e.jsx("span",{className:"text-dyellow",children:a.character})]})]})]})}))})]})]}),e.jsx("div",{className:"bg-blue h-64 md:h-72"}),e.jsx("div",{className:"bg-blue w-full mb-14",children:e.jsxs("div",{className:" min-h-[90vh] max-w-7xl mx-auto ",children:[e.jsx("div",{className:"max-w-4xl mx-auto px-8",children:e.jsx("iframe",{width:"100%",className:"h-[500px] aspect-video",src:`https://www.youtube.com/embed/${(b=j[0])==null?void 0:b.key}`,frameBorder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"flex flex-wrap gap-4 md:gap-6 px-4 justify-center mt-10",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-dyellow me-2",children:"Rating:"}),e.jsx(T,{rating:t[0].vote_average.toFixed(2)})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-white flex items-center",children:[e.jsx("span",{className:"text-dyellow me-2",children:"Released:"}),t[0].release_date.slice(0,4)]})}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"text-dyellow me-2",children:"Duration:"}),e.jsx(q,{duration:t[0].runtime})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-white",children:[e.jsx("span",{className:"text-dyellow me-2",children:"Gener(s):"}),t[0].genres.map(a=>a.name).join(",")]})}),e.jsx("div",{children:m[0].crew.map(a=>a.job==="Director"?e.jsxs("p",{className:" text-white",children:[e.jsx("span",{className:"text-dyellow font-semibold me-2",children:"Director:"}),a.name]},a.id):null)}),e.jsx("div",{children:e.jsxs("p",{className:"text-white",children:[e.jsx("span",{className:"text-dyellow me-2",children:"Language:"}),t[0].original_language]})}),e.jsx("div",{children:e.jsxs("p",{className:"text-white",children:[e.jsx("span",{className:"text-dyellow me-2",children:"Country:"}),t[0].origin_country.join(",")]})})]}),l||o.type==="trending"||o.type==="comingsoon"?null:e.jsx("div",{className:"mt-10 text-center",children:e.jsx(N,{id:t[0].id})})]})}),e.jsx(z,{type:"similarmovies",data:n}),e.jsx("section",{className:"bg-blue w-full pt-10 pb-32",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(L,{text:"Reviews"}),e.jsx("div",{className:"space-x-4",children:e.jsx(y,{pref:r,nref:x})})]}),h.length===0?e.jsx("p",{className:"text-white text-lg text-center",children:"No reviews"}):e.jsx(E,{spaceBetween:30,effect:"fade",autoHeight:!0,onBeforeInit:a=>{a.params.navigation.prevEl=r.current,a.params.navigation.nextEl=x.current},navigation:{prevEl:r.current,nextEl:x.current},modules:[X,S],className:"mySwiper",children:h.map(a=>e.jsx(M,{children:e.jsxs("div",{className:"bg-blue space-y-4 h-fit",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-dyellow text-2xl",children:a.author_details.name||a.author_details.username})}),e.jsx("div",{className:"flex gap-2",children:e.jsx(T,{rating:a.author_details.rating})})]}),e.jsx("div",{children:e.jsx("p",{className:"text-white ",children:a.content})})]})}))})]})})]}))}export{te as default};
