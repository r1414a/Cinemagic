import{r as j,j as i,b as H,u as O,e as R,L as q,N as G,f as Y}from"./index-B8z_zBDs.js";import{m as y,c as U,e as X,s as F,a as K,b as P,S as V,d as J,B as Q,T as E}from"./TypeMovies-Deh_WPY7.js";import{c as W}from"./index-CDTVc3k6.js";import{M as Z,F as ee}from"./MovieDuration-YiszCoLB.js";import{a as ae}from"./allapis-VSAyny7H.js";import"./index-CH5ZUpk5.js";function M(u){return u===void 0&&(u=""),`.${u.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function se(u){let{swiper:e,extendParams:b,on:o,emit:p}=u;const c="swiper-pagination";b({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${c}-bullet`,bulletActiveClass:`${c}-bullet-active`,modifierClass:`${c}-`,currentClass:`${c}-current`,totalClass:`${c}-total`,hiddenClass:`${c}-hidden`,progressbarFillClass:`${c}-progressbar-fill`,progressbarOppositeClass:`${c}-progressbar-opposite`,clickableClass:`${c}-clickable`,lockClass:`${c}-lock`,horizontalClass:`${c}-horizontal`,verticalClass:`${c}-vertical`,paginationDisabledClass:`${c}-disabled`}}),e.pagination={el:null,bullets:[]};let n,m=0;function $(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function L(a,s){const{bulletActiveClass:t}=e.params.pagination;a&&(a=a[`${s==="prev"?"previous":"next"}ElementSibling`],a&&(a.classList.add(`${t}-${s}`),a=a[`${s==="prev"?"previous":"next"}ElementSibling`],a&&a.classList.add(`${t}-${s}-${s}`)))}function B(a,s,t){if(a=a%t,s=s%t,s===a+1)return"next";if(s===a-1)return"previous"}function A(a){const s=a.target.closest(M(e.params.pagination.bulletClass));if(!s)return;a.preventDefault();const t=P(s)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===t)return;const l=B(e.realIndex,t,e.slides.length);l==="next"?e.slideNext():l==="previous"?e.slidePrev():e.slideToLoop(t)}else e.slideTo(t)}function C(){const a=e.rtl,s=e.params.pagination;if($())return;let t=e.pagination.el;t=y(t);let l,h;const w=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,_=e.params.loop?Math.ceil(w/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(h=e.previousRealIndex||0,l=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(l=e.snapIndex,h=e.previousSnapIndex):(h=e.previousIndex||0,l=e.activeIndex||0),s.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const r=e.pagination.bullets;let v,x,S;if(s.dynamicBullets&&(n=K(r[0],e.isHorizontal()?"width":"height"),t.forEach(d=>{d.style[e.isHorizontal()?"width":"height"]=`${n*(s.dynamicMainBullets+4)}px`}),s.dynamicMainBullets>1&&h!==void 0&&(m+=l-(h||0),m>s.dynamicMainBullets-1?m=s.dynamicMainBullets-1:m<0&&(m=0)),v=Math.max(l-m,0),x=v+(Math.min(r.length,s.dynamicMainBullets)-1),S=(x+v)/2),r.forEach(d=>{const f=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(g=>`${s.bulletActiveClass}${g}`)].map(g=>typeof g=="string"&&g.includes(" ")?g.split(" "):g).flat();d.classList.remove(...f)}),t.length>1)r.forEach(d=>{const f=P(d);f===l?d.classList.add(...s.bulletActiveClass.split(" ")):e.isElement&&d.setAttribute("part","bullet"),s.dynamicBullets&&(f>=v&&f<=x&&d.classList.add(...`${s.bulletActiveClass}-main`.split(" ")),f===v&&L(d,"prev"),f===x&&L(d,"next"))});else{const d=r[l];if(d&&d.classList.add(...s.bulletActiveClass.split(" ")),e.isElement&&r.forEach((f,g)=>{f.setAttribute("part",g===l?"bullet-active":"bullet")}),s.dynamicBullets){const f=r[v],g=r[x];for(let k=v;k<=x;k+=1)r[k]&&r[k].classList.add(...`${s.bulletActiveClass}-main`.split(" "));L(f,"prev"),L(g,"next")}}if(s.dynamicBullets){const d=Math.min(r.length,s.dynamicMainBullets+4),f=(n*d-n)/2-S*n,g=a?"right":"left";r.forEach(k=>{k.style[e.isHorizontal()?g:"top"]=`${f}px`})}}t.forEach((r,v)=>{if(s.type==="fraction"&&(r.querySelectorAll(M(s.currentClass)).forEach(x=>{x.textContent=s.formatFractionCurrent(l+1)}),r.querySelectorAll(M(s.totalClass)).forEach(x=>{x.textContent=s.formatFractionTotal(_)})),s.type==="progressbar"){let x;s.progressbarOpposite?x=e.isHorizontal()?"vertical":"horizontal":x=e.isHorizontal()?"horizontal":"vertical";const S=(l+1)/_;let d=1,f=1;x==="horizontal"?d=S:f=S,r.querySelectorAll(M(s.progressbarFillClass)).forEach(g=>{g.style.transform=`translate3d(0,0,0) scaleX(${d}) scaleY(${f})`,g.style.transitionDuration=`${e.params.speed}ms`})}s.type==="custom"&&s.renderCustom?(F(r,s.renderCustom(e,l+1,_)),v===0&&p("paginationRender",r)):(v===0&&p("paginationRender",r),p("paginationUpdate",r)),e.params.watchOverflow&&e.enabled&&r.classList[e.isLocked?"add":"remove"](s.lockClass)})}function D(){const a=e.params.pagination;if($())return;const s=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let t=e.pagination.el;t=y(t);let l="";if(a.type==="bullets"){let h=e.params.loop?Math.ceil(s/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&h>s&&(h=s);for(let w=0;w<h;w+=1)a.renderBullet?l+=a.renderBullet.call(e,w,a.bulletClass):l+=`<${a.bulletElement} ${e.isElement?'part="bullet"':""} class="${a.bulletClass}"></${a.bulletElement}>`}a.type==="fraction"&&(a.renderFraction?l=a.renderFraction.call(e,a.currentClass,a.totalClass):l=`<span class="${a.currentClass}"></span> / <span class="${a.totalClass}"></span>`),a.type==="progressbar"&&(a.renderProgressbar?l=a.renderProgressbar.call(e,a.progressbarFillClass):l=`<span class="${a.progressbarFillClass}"></span>`),e.pagination.bullets=[],t.forEach(h=>{a.type!=="custom"&&F(h,l||""),a.type==="bullets"&&e.pagination.bullets.push(...h.querySelectorAll(M(a.bulletClass)))}),a.type!=="custom"&&p("paginationRender",t[0])}function N(){e.params.pagination=U(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const a=e.params.pagination;if(!a.el)return;let s;typeof a.el=="string"&&e.isElement&&(s=e.el.querySelector(a.el)),!s&&typeof a.el=="string"&&(s=[...document.querySelectorAll(a.el)]),s||(s=a.el),!(!s||s.length===0)&&(e.params.uniqueNavElements&&typeof a.el=="string"&&Array.isArray(s)&&s.length>1&&(s=[...e.el.querySelectorAll(a.el)],s.length>1&&(s=s.find(t=>X(t,".swiper")[0]===e.el))),Array.isArray(s)&&s.length===1&&(s=s[0]),Object.assign(e.pagination,{el:s}),s=y(s),s.forEach(t=>{a.type==="bullets"&&a.clickable&&t.classList.add(...(a.clickableClass||"").split(" ")),t.classList.add(a.modifierClass+a.type),t.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.type==="bullets"&&a.dynamicBullets&&(t.classList.add(`${a.modifierClass}${a.type}-dynamic`),m=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),a.type==="progressbar"&&a.progressbarOpposite&&t.classList.add(a.progressbarOppositeClass),a.clickable&&t.addEventListener("click",A),e.enabled||t.classList.add(a.lockClass)}))}function z(){const a=e.params.pagination;if($())return;let s=e.pagination.el;s&&(s=y(s),s.forEach(t=>{t.classList.remove(a.hiddenClass),t.classList.remove(a.modifierClass+a.type),t.classList.remove(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&(t.classList.remove(...(a.clickableClass||"").split(" ")),t.removeEventListener("click",A))})),e.pagination.bullets&&e.pagination.bullets.forEach(t=>t.classList.remove(...a.bulletActiveClass.split(" ")))}o("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const a=e.params.pagination;let{el:s}=e.pagination;s=y(s),s.forEach(t=>{t.classList.remove(a.horizontalClass,a.verticalClass),t.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass)})}),o("init",()=>{e.params.pagination.enabled===!1?T():(N(),D(),C())}),o("activeIndexChange",()=>{typeof e.snapIndex>"u"&&C()}),o("snapIndexChange",()=>{C()}),o("snapGridLengthChange",()=>{D(),C()}),o("destroy",()=>{z()}),o("enable disable",()=>{let{el:a}=e.pagination;a&&(a=y(a),a.forEach(s=>s.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),o("lock unlock",()=>{C()}),o("click",(a,s)=>{const t=s.target,l=y(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&l&&l.length>0&&!t.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&t===e.navigation.nextEl||e.navigation.prevEl&&t===e.navigation.prevEl))return;const h=l[0].classList.contains(e.params.pagination.hiddenClass);p(h===!0?"paginationShow":"paginationHide"),l.forEach(w=>w.classList.toggle(e.params.pagination.hiddenClass))}});const I=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=y(a),a.forEach(s=>s.classList.remove(e.params.pagination.paginationDisabledClass))),N(),D(),C()},T=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=y(a),a.forEach(s=>s.classList.add(e.params.pagination.paginationDisabledClass))),z()};Object.assign(e.pagination,{enable:I,disable:T,render:D,update:C,init:N,destroy:z})}function te({movieData:u,creditData:e}){const[b,o]=j.useState(null);return j.useEffect(()=>{const p=e.find(c=>c.id===u.id);o(p)},[]),i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-lg lg:text-xl text-white",children:[i.jsx("span",{className:"text-dyellow font-semibold me-2",children:"Director:"}),b&&b.crew.map(p=>p.job==="Director"?p.name+",":null)]}),i.jsxs("p",{className:"text-md lg:text-lg text-white",children:[i.jsx("span",{className:"text-dyellow font-semibold me-2",children:"Stars:"}),b&&b.cast.slice(0,4).map(p=>p.name).join(",")]})]})}const ie="1aee3a34d219b4b6213fc8d93c1c07f5";function le(){const u=H(),[e,b]=j.useState(null),{details:o,credits:p,isLoading:c}=O(n=>n.movie);return j.useEffect(()=>{e&&(async()=>{const m=await ae("/api/automateShowtime","POST",{topFiveMovies:e},"Error while storing showtime");console.log(m)})()},[e]),j.useEffect(()=>((async()=>{try{const m=`https://api.themoviedb.org/3/movie/now_playing?api_key=${ie}`,$=await fetch(m),L=await $.json();if($.ok){const B=L.results.slice(0,5);b(B),B.forEach(A=>{u(Y(A.id))})}}catch(m){console.log(m)}})(),()=>{u(R())}),[u]),c?i.jsx(q,{}):i.jsx("section",{className:" h-screen",children:i.jsx(V,{pagination:{dynamicBullets:!0,clickable:!0},modules:[se],className:"mySwiper h-full",children:o&&o.map(n=>i.jsxs(J,{className:"",style:{backgroundImage:`url(https://image.tmdb.org/t/p//original${n.backdrop_path})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",display:"flex"},children:[i.jsx("div",{className:"absolute w-full z-10 h-full bg-radial-[at_50%_80%] md:bg-radial-[at_50%_50%] from-transparent to-black to-70% opacity-[0.9] lg:opacity-[0.7] "}),i.jsx("div",{className:" z-30 w-full h-full",children:i.jsxs("div",{className:"w-full h-full max-w-7xl mx-auto px-8 md:px-8 xl:px-4  pb-24 md:pb-26 lg:pb-20 xl:pb-24 2xl:pb-20 flex flex-col md:flex-row gap-10 md:gap-4 lg:gap-0 justify-end md:justify-between md:items-end",children:[i.jsxs("div",{className:"md:w-[60%] space-y-3 lg:space-y-4",children:[i.jsx("h1",{className:"max-w-xl text-white text-4xl md:text-5xl lg:text-6xl font-semibold",children:n.original_title}),i.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4",children:[i.jsx("div",{children:i.jsx("p",{className:"text-md text-white",children:n.genres.map(m=>m.name).join(",")})}),i.jsx("div",{children:i.jsxs("p",{className:"text-white flex gap-2 items-center",children:[i.jsx(W,{className:"text-dyellow"}),n.release_date.slice(0,4)]})}),i.jsx("div",{children:i.jsx(Z,{duration:n.runtime})})]}),i.jsxs("div",{className:"flex gap-2 text-white",children:[i.jsx("div",{className:"flex items-center",children:i.jsx(ee,{rating:n.vote_average.toFixed(2)})}),i.jsxs("div",{children:[n.vote_count," Votes"]})]}),i.jsxs("div",{className:"space-x-4 mt-8",children:[i.jsx(Q,{id:n.id}),i.jsx(G,{to:`/movie/${n.id}`,className:"py-3 px-10 rounded-sm font-semibold border-2 border-dyellow text-dyellow",children:"More"})]})]}),i.jsx("div",{className:"md:w-[40%] flex flex-col space-y-1 md:space-y-3",children:i.jsx(te,{movieData:n,creditData:p})})]})})]}))})})}const ne="https://api.themoviedb.org/3/movie/";function me(){const[u,e]=j.useState({trending:null,upcoming:null});return j.useEffect(()=>{(async()=>{try{const[o,p]=await Promise.all([fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=1aee3a34d219b4b6213fc8d93c1c07f5"),fetch(ne+"upcoming?api_key=1aee3a34d219b4b6213fc8d93c1c07f5")]),[c,n]=await Promise.all([o.json(),p.json()]);o.ok&&p.ok&&e({trending:c.results,upcoming:n.results})}catch(o){console.log(o)}})()},[]),i.jsxs(i.Fragment,{children:[i.jsx(le,{}),i.jsx(E,{type:"trending",data:u.trending}),i.jsx(E,{type:"comingsoon",data:u.upcoming})]})}export{me as default};
